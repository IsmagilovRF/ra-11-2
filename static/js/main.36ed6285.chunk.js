(this["webpackJsonphw-11-2"]=this["webpackJsonphw-11-2"]||[]).push([[0],{29:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(15),i=r.n(c),o=(r(29),r(22)),s=r(4),u=r(6),l=r(10),d=r.n(l),b=r(14),j="REMOVE_SERVICE",p="CHANGE_ADD_SERVICE_FIELD",h="FETCH_SERVICES_REQUEST",v="FETCH_SERVICES_FAILURE",O="FETCH_SERVICES_SUCCESS",m="IS_LOADING_REQUEST",f="IS_LOADING_FAILURE",E="IS_LOADING_SUCCESS",g="ADD_SERVICES_REQUEST",x="ADD_SERVICES_FAILURE",y="ADD_SERVICES_SUCCESS",S="CHANGE_SERVICE_FIELD",C="CHANGE_SERVICES_REQUEST",_="CHANGE_SERVICES_FAILURE",I="CHANGE_SERVICES_SUCCESS",N="CHANGE_SERVICES_INIT";function k(){return{type:h}}function w(e){return{type:v,payload:{error:e}}}function L(e){return{type:O,payload:e}}function R(){return{type:I}}function A(e){return{type:N,payload:e}}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(b.a)(d.a.mark((function t(r){var n,a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(k()),n=e?"".concat("https://calm-oasis-98972.herokuapp.com/api/services","/").concat(e):"https://calm-oasis-98972.herokuapp.com/api/services",t.prev=2,t.next=5,fetch(n);case 5:if((a=t.sent).ok){t.next=8;break}throw new Error(a.statusText);case 8:return t.next=10,a.json();case 10:c=t.sent,r(e?A(c):L({data:c})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),r(w({error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}()},D=r(1);function V(e){var t=Object(u.c)((function(e){return e.serviceAdd})),r=t.item,n=t.loading,a=t.error,c=Object(u.b)(),i=function(e){var t=e.target,r=t.name,n=t.value;c(function(e,t){return{type:p,payload:{nameField:e,value:t}}}(r,n))};return Object(D.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),c((t=r.name,n=r.price,function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:g}),e.prev=1,e.next=4,fetch("https://calm-oasis-98972.herokuapp.com/api/services",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,price:n})});case 4:id?r(R()):(r({type:y}),r(F())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r((a=e.t0.message,{type:x,payload:{error:a}}));case 10:case"end":return e.stop()}var a}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()))},children:[a&&Object(D.jsx)("div",{className:"error-msg",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"}),Object(D.jsx)("input",{name:"name",onChange:i,value:r.name}),Object(D.jsx)("input",{name:"price",onChange:i,value:r.price}),!n&&Object(D.jsx)("button",{className:"ui inverted green button",type:"submit",disabled:n,children:"Save"}),n&&Object(D.jsx)("div",{className:"ui active slow green double loader"})]})}function T(e){var t=e.match,r=e.history,c=Object(u.c)((function(e){return e.serviceList})),i=c.items,o=c.loading,s=c.error,l=Object(u.c)((function(e){return e.serviceIsLoadng})),j=l.isLoading,p=(l.isError,Object(u.b)());Object(n.useEffect)((function(){p(F())}),[p]);var h=function(e){p(function(e){return function(){var t=Object(b.a)(d.a.mark((function t(r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:m}),t.prev=1,t.next=4,fetch("".concat("https://calm-oasis-98972.herokuapp.com/api/services","/").concat(e),{method:"DELETE"});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),r((n=t.t0.message,{type:f,payload:{error:n}}));case 9:return t.prev=9,r({type:E}),r(F()),t.finish(9);case 13:case"end":return t.stop()}var n}),t,null,[[1,6,9,13]])})));return function(e){return t.apply(this,arguments)}}()}(e))};return o?Object(D.jsx)("div",{className:"ui active slow green double loader"}):s?Object(D.jsxs)(a.a.Fragment,{children:[Object(D.jsx)("div",{className:"error-msg",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"}),Object(D.jsx)("button",{className:"ui red basic button",onClick:function(){p(F())},children:"Refresh"})]}):(console.log("match.url = "+t.url),Object(D.jsxs)(a.a.Fragment,{children:[Object(D.jsx)(V,{}),Object(D.jsx)("ul",{children:i&&i.map((function(e){return Object(D.jsxs)("li",{children:[e.name," ",e.price,Object(D.jsx)("button",{className:"button btn",onClick:function(){return function(e){r.push("".concat(t.url,"/").concat(e))}(e.id)},children:Object(D.jsx)("i",{className:"edit icon"})}),Object(D.jsx)("button",{onClick:function(){return h(e.id)},disabled:j,children:Object(D.jsx)("i",{className:"trash icon"})})]},e.id)}))})]}))}var U=r(24);function G(e){var t=e.match,r=e.history,c=Object(u.c)((function(e){return e.serviceChange})),i=c.item,o=c.chLoading,s=c.chError,l=Object(u.c)((function(e){return e.serviceList})),j=l.loading,p=l.error,h=Object(n.useState)(!0),v=Object(U.a)(h,2),O=v[0],m=v[1],f=Object(u.b)(),E=Number(t.params.id);Object(n.useEffect)((function(){O||o||r.goBack(),O&&(m(!1),f(F(E)))}),[f,o]);var g=function(e){var t=e.target,r=t.name,n=t.value;f(function(e,t){return{type:S,payload:{nameField:e,value:t}}}(r,n))};return j?Object(D.jsx)("div",{className:"ui active slow green double loader"}):p?Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"error-msg",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"}),Object(D.jsx)("button",{class:"ui red basic button",onClick:function(){r.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]}):Object(D.jsxs)(a.a.Fragment,{children:[Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(function(e,t,r,n){return function(){var a=Object(b.a)(d.a.mark((function a(c){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c({type:C}),a.prev=1,a.next=4,fetch("https://calm-oasis-98972.herokuapp.com/api/services",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:e,name:t,price:r,content:n})});case 4:a.sent,c(R()),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0),c((i={error:a.t0.message},{type:_,payload:{error:i}}));case 12:case"end":return a.stop()}var i}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(E,i.name,i.price,i.content))},disabled:o,className:"change-form",children:[Object(D.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(D.jsx)("input",{name:"name",onChange:g,value:i.name}),Object(D.jsx)("label",{children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(D.jsx)("input",{name:"price",onChange:g,value:i.price}),Object(D.jsx)("label",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(D.jsx)("input",{name:"content",onChange:g,value:i.content}),Object(D.jsxs)("div",{className:"buttons",children:[Object(D.jsx)("button",{type:"button",onClick:function(){r.goBack()},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),!o&&Object(D.jsx)("button",{type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}),o&&Object(D.jsx)("div",{className:"ui active slow green double loader"}),s&&Object(D.jsx)("p",{children:s.message})]})}function H(e){var t=window.location.pathname;return Object(D.jsx)(a.a.Fragment,{children:Object(D.jsx)(o.a,{children:Object(D.jsxs)(s.d,{children:[Object(D.jsx)(s.b,{path:"".concat(t,"services/:id"),component:G}),Object(D.jsx)(s.b,{path:"".concat(t,"services"),component:T}),Object(D.jsx)(s.a,{exact:!0,from:"".concat(t),to:"".concat(t,"services")})]})})})}var B=r(17),J=r(23),Q=r(2),P={items:[],loading:!1,error:null};var M=r(12),q={item:{name:"",price:""},loading:!1,error:null};var z={item:{id:"",name:"",price:"",content:""},chLoading:!1,chError:null};var K={isLoading:!1,isError:null};var W=Object(B.b)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0,error:null});case v:var r=t.payload.error;return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,error:r});case O:var n=t.payload.data;return Object(Q.a)(Object(Q.a)({},e),{},{items:n,loading:!1,error:null});case j:var a=t.payload;return e.items.filter((function(e){return e.id!==a.id}));case N:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,error:null});default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var r=t.payload,n=r.nameField,a=r.value;return Object(Q.a)(Object(Q.a)({},e),{},{item:Object(Q.a)(Object(Q.a)({},e.item),{},Object(M.a)({},n,a))});case g:return Object(Q.a)(Object(Q.a)({},e),{},{loading:!0,error:null});case y:return Object(Q.a)({},q);case x:var c=t.payload.error;return Object(Q.a)(Object(Q.a)({},e),{},{loading:!1,error:c});default:return e}},serviceChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:var r=t.payload,n=r.nameField,a=r.value;return Object(Q.a)(Object(Q.a)({},e),{},{item:Object(Q.a)(Object(Q.a)({},e.item),{},Object(M.a)({},n,a))});case C:return Object(Q.a)(Object(Q.a)({},e),{},{chLoading:!0,chError:null});case _:var c=t.payload.error;return Object(Q.a)(Object(Q.a)({},e),{},{chLoading:!1,chError:c});case I:return Object(Q.a)({},z);case N:console.log(t.payload);var i=t.payload,o=i.id,s=i.name,u=i.price,l=i.content;return Object(Q.a)(Object(Q.a)({},e),{},{chLoading:!1,chError:null,item:{id:o,name:s,price:u,content:l}});default:return e}},serviceIsLoadng:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(Q.a)(Object(Q.a)({},e),{},{isLoading:!0});case f:console.log(t.payload);var r=t.payload.error;return Object(Q.a)(Object(Q.a)({},e),{},{isLoading:!1,isError:r});case E:return Object(Q.a)({},K);default:return e}}}),X=Object(B.c)(W,Object(B.a)(J.a));i.a.render(Object(D.jsx)(u.a,{store:X,children:Object(D.jsx)(H,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.36ed6285.chunk.js.map